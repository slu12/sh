// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.14/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Error ../../../core/promiseUtils ./summaryStatistics ./support/ageUtils ./support/ageUtils ../support/utils".split(" "),function(v,w,p,k,l,d,q,r,e,t,m){function u(b){return l(this,void 0,void 0,function(){var a,f,c,g,n;return k(this,function(h){switch(h.label){case 0:if(!(b&&b.layer&&b.startTime&&b.endTime&&b.unit))throw new d("summary-statistics-for-age:missing-parameters",
"'layer', 'startTime', 'endTime' and 'unit' parameters are required");a=p({},b);f=[0,2,1,3];c=m.createLayerAdapter(a.layer,f);a.layer=c;if(!c)throw new d("summary-statistics-for-age:invalid-parameters","'layer' must be one of these types: "+m.getLayerTypeLabels(f).join(", "));g=a.view;return[4,q.all([g&&g.when(),c.load()])];case 1:h.sent();if(n=e.verifyDates(c,a.startTime,a.endTime,"summary-statistics-for-age:invalid-parameters"))throw n;if(-1===e.supportedAgeUnits.indexOf(a.unit))throw new d("summary-statistics-for-age:invalid-parameters",
"Supported units are: "+e.supportedAgeUnits.join(", "));return[2,a]}})})}return function(b){return l(this,void 0,void 0,function(){var a,f,c,g,n,h,d,e,l,m;return k(this,function(k){switch(k.label){case 0:return[4,u(b)];case 1:return a=k.sent(),f=a.view,c=a.startTime,g=a.endTime,n=a.unit,h=a.layer,d=t.getAgeExpressions({layer:h,startTime:c,endTime:g,unit:n}),e=d.valueExpression,l=d.statisticsQuery,m=p({layer:h,valueExpression:e},l,{view:f}),[2,r(m)]}})})}});