// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.14/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Error ./support/utils ../support/utils".split(" "),function(t,u,p,l,d,g,q,h){function r(a){return d(this,void 0,void 0,function(){var b,m,c,e,f,d,n;return l(this,function(k){switch(k.label){case 0:if(!a||!a.layer||!a.field&&!a.valueExpression)throw new g("unique-values:missing-parameters","'layer' and 'field' or 'valueExpression' parameters are required");
m=(b=a.valueExpression||a.sqlExpression)&&!a.sqlExpression;if(b)if(m){if(!a.view)throw new g("unique-values:missing-parameters","View is required when 'valueExpression' is specified");}else if(!a.valueExpression)throw new g("unique-values:missing-parameters","'valueExpression' parameters are required");c=p({},a);e=[0,2,1,3,4];f=h.createLayerAdapter(c.layer,e);c.layer=f;if(!f)throw new g("unique-values:invalid-parameters","'layer' must be one of these types: "+h.getLayerTypeLabels(e).join(", "));return[4,
f.load()];case 1:return k.sent(),[4,h.getFieldsList({field:c.field,valueExpression:c.valueExpression})];case 2:d=k.sent();if(n=q.verifyBasicFieldValidity(f,d,"unique-values:invalid-parameters"))throw n;return[2,c]}})})}return function(a){return d(this,void 0,void 0,function(){var b,d,c;return l(this,function(e){switch(e.label){case 0:return[4,r(a)];case 1:return b=e.sent(),d=b.layer,c={field:b.field,valueExpression:b.valueExpression,sqlExpression:b.sqlExpression,sqlWhere:b.sqlWhere,features:b.features,
returnAllCodedValues:b.returnAllCodedValues,view:b.view},[2,d.uniqueValues(c)]}})})}});