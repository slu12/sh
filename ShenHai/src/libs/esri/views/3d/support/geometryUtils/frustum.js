// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.14/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/ObjectStack ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../core/libs/gl-matrix-2/vec4 ../../../../core/libs/gl-matrix-2/vec4f64 ../stack ./clipRay ./plane".split(" "),function(x,f,u,l,m,c,v,g,n,k,d){function h(a){if(a){var b=a.planes;a=a.points;return{planes:[d.create(b[0]),d.create(b[1]),d.create(b[2]),d.create(b[3]),d.create(b[4]),d.create(b[5])],points:[c.vec3f64.clone(a[0]),
c.vec3f64.clone(a[1]),c.vec3f64.clone(a[2]),c.vec3f64.clone(a[3]),c.vec3f64.clone(a[4]),c.vec3f64.clone(a[5]),c.vec3f64.clone(a[6]),c.vec3f64.clone(a[7])]}}return{planes:[d.create(),d.create(),d.create(),d.create(),d.create(),d.create()],points:[c.vec3f64.create(),c.vec3f64.create(),c.vec3f64.create(),c.vec3f64.create(),c.vec3f64.create(),c.vec3f64.create(),c.vec3f64.create(),c.vec3f64.create()]}}function p(a,b,e){void 0===e&&(e=h());for(var c=0;6>c;c++)d.copy(a[c],e.planes[c]);for(c=0;8>c;c++)m.vec3.copy(e.points[c],
b[c]);return e}function q(a){var b=a.planes;a=a.points;d.fromPoints(a[4],a[0],a[3],b[0]);d.fromPoints(a[1],a[5],a[6],b[1]);d.fromPoints(a[4],a[5],a[1],b[2]);d.fromPoints(a[3],a[2],a[6],b[3]);d.fromPoints(a[0],a[1],a[2],b[4]);d.fromPoints(a[5],a[4],a[7],b[5])}function r(a,b){for(var e=0;6>e;e++)if(!d.clip(a[e],b))return!1;return!0}Object.defineProperty(f,"__esModule",{value:!0});f.create=h;f.copy=function(a,b){void 0===b&&(b=h());return p(a.planes,a.points,b)};f.fromValues=p;f.fromMatrix=function(a,
b,e){void 0===e&&(e=h());var c=e.points;a=l.mat4.multiply(n.sm4d.get(),b,a);l.mat4.invert(a,a);for(b=0;8>b;++b){var d=v.vec4.transformMat4(n.sv4d.get(),w[b],a);m.vec3.set(c[b],d[0]/d[3],d[1]/d[3],d[2]/d[3])}q(e);return e};f.recomputePlanes=q;f.intersectsSphere=function(a,b){for(var e=0;6>e;e++)if(d.isSphereFullyInside(a[e],b))return!1;return!0};f.intersectsRay=function(a,b){return r(a,k.fromRay(b,t.get()))};f.intersectsLineSegment=function(a,b,d){return r(a,k.fromLineSegmentAndDirection(b,d,t.get()))};
f.intersectsPoint=function(a,b){for(var c=0;6>c;c++)if(0<d.signedDistance(a[c],b))return!1;return!0};f.intersectsAABB=function(a,b){for(var c=0;6>c;c++)if(d.isAABBFullyInside(a[c],b))return!1;return!0};f.planePointIndices={bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]};var w=[g.vec4f64.fromValues(-1,-1,-1,1),g.vec4f64.fromValues(1,-1,-1,1),g.vec4f64.fromValues(1,1,-1,1),g.vec4f64.fromValues(-1,1,-1,1),g.vec4f64.fromValues(-1,-1,1,1),g.vec4f64.fromValues(1,
-1,1,1),g.vec4f64.fromValues(1,1,1,1),g.vec4f64.fromValues(-1,1,1,1)],t=new u.ObjectStack(k.create)});